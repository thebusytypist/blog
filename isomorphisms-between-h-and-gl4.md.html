<meta charset="utf-8">

**Pretend I do not know quaternion before**
    <a href="https://blog.linearconstraints.net"><img src="/images/house-fill.svg" height="16" style="vertical-align:middle"></a> [Home]("https://blog.linearconstraints.net") <a href="mailto:ounanding@gmail.com"><img src="/images/envelope-fill.svg" height="16" style="vertical-align:middle"></a> ounanding@gmail.com <img src="/images/calendar3.svg" height="16" style="vertical-align:middle"> Mon Feb 22 22:44:49 PST 2021

<div style="display:none">
$$
\newcommand{\mx}[1]{\begin{pmatrix} #1 \end{pmatrix}}
\newcommand{\gp}[1]{\left( #1 \right)}
\newcommand{\abs}[1]{\left| #1 \right|}
\newcommand{\norm}[1]{\left\lVert #1 \right\rVert}
\newcommand{\cp}[1]{{#1^\times}}
\DeclareMathOperator{\tr}{tr}
\renewcommand{\AA}{\mathbf{A}}
\newcommand{\BB}{\mathbf{B}}
\newcommand{\CC}{\mathbf{C}}
\newcommand{\EE}{\mathbf{E}}
\newcommand{\FF}{\mathbf{F}}
\newcommand{\HH}{\mathbf{H}}
\newcommand{\II}{\mathbf{I}}
\newcommand{\KK}{\mathbf{K}}
\newcommand{\LL}{\mathbf{L}}
\newcommand{\MM}{\mathbf{M}}
\newcommand{\NN}{\mathbf{N}}
\newcommand{\OO}{\mathbf{O}}
\newcommand{\PP}{\mathbf{P}}
\newcommand{\QQ}{\mathbf{Q}}
\newcommand{\RR}{\mathbf{R}}
\renewcommand{\SS}{\mathbf{S}}
\newcommand{\TT}{\mathbf{T}}
\renewcommand{\TT}{\mathbf{T}}
\newcommand{\UU}{\mathbf{U}}
\newcommand{\VV}{\mathbf{V}}
\newcommand{\WW}{\mathbf{W}}
\newcommand{\XX}{\mathbf{X}}
\renewcommand{\aa}{\mathbf{a}}
\newcommand{\bb}{\mathbf{b}}
\newcommand{\cc}{\mathbf{c}}
\newcommand{\dd}{\mathbf{d}}
\newcommand{\ee}{\mathbf{e}}
\newcommand{\ff}{\mathbf{f}}
\renewcommand{\gg}{\mathbf{g}}
\newcommand{\jj}{\mathbf{j}}
\newcommand{\mm}{\mathbf{m}}
\newcommand{\nn}{\mathbf{n}}
\newcommand{\pp}{\mathbf{p}}
\newcommand{\qq}{\mathbf{q}}
\newcommand{\rr}{\mathbf{r}}
\renewcommand{\tt}{\mathbf{t}}
\newcommand{\uu}{\mathbf{u}}
\newcommand{\vv}{\mathbf{v}}
\newcommand{\ww}{\mathbf{w}}
\newcommand{\xx}{\mathbf{x}}
\newcommand{\yy}{\mathbf{y}}
\newcommand{\zz}{\mathbf{z}}
\newcommand{\ttau}{\boldsymbol{\tau}}
\newcommand{\eye}{\boldsymbol{\delta}}
$$
</div>

I believe it is possible to recover the quaternion arithmetics in $GL_4$ by
following several constraints, rather than give all the arithmetics from vacuum
and show they just work.

The existence of unit element gives me the first column of the matrix.  I still
have to use the fact that the unit element is $\mx{1,0,0,0}^T$.  I do not know
how the giants came to this special unit element in the history.

Now the problem is to determine the right part:
\begin{align}
\uu^\square &=
\mx{
s & \bb^T \\
\vv & \BB
}
\end{align}

I knew how they look like, but let me start with a representation as general as
possible. In order to relate the time derivative to angular velocity later, I
need the commutability.

\begin{align}
\pp^\square \qq^\square &=
\mx{
s_p & \bb^T_p \\
\vv_p & \BB_p
}
\mx{
s_q & \bb^T_q \\
\vv_q & \BB_q
} \\
&=
\mx{
s_p s_q + \bb^T_p \vv_q & s_p \bb^T_q + \bb^T_p \BB_q \\
s_q \vv_p + \BB_p \vv_q & \vv_p \bb^T_q + \BB_p \BB_q
} \\
\qq^\square \pp^\square &=
\mx{
s_q & \bb^T_q \\
\vv_q & \BB_q
}
\mx{
s_p & \bb^T_p \\
\vv_p & \BB_p
} \\
&=
\mx{
s_q s_p + \bb^T_q \vv_p & s_q \bb^T_p + \bb^T_q \BB_p \\
s_p \vv_q + \BB_q \vv_p & \vv_q \bb^T_p + \BB_q \BB_p
}
\end{align}

For *any* $\pp$ and $\qq$:
\begin{align}
\bb^T_p \vv_q &= \bb^T_q \vv_p \\
s_q \vv_p + \BB_p \vv_q &= s_p \vv_q + \BB_q \vv_p \\
s_p \bb^T_q + \bb^T_p \BB_q &= s_q \bb^T_p + \bb^T_q \BB_p \\
\vv_p \bb^T_q + \BB_p \BB_q &= \vv_q \bb^T_p + \BB_q \BB_p
\end{align}

\begin{align}
\bb^T_p \vv_q &= \bb^T_q \vv_p \\
k \bb^T_p \bb_q &= \bb^T_q \vv_p \\
\implies \bb_p &= \frac{1}{k} \vv_p = l \vv_p \\
\frac{1}{k} \vv_p^T \vv_q &= \bb^T_q \vv_p \\
\implies \bb_q &= \frac{1}{k} \vv_q = l \vv_q
\end{align}

The orthogonality (preserving of length) then helps determine the possible
values of $l$.

$$
\begin{align}
\pp^\square \pp^{\square T} &= \II \\
\mx{
s_p & \bb^T_p \\
\vv_p & \BB_p
}
\mx{
s_p & \vv^T_p \\
\bb_p & \BB^T_p
}
&= \II \\
\mx{
s_p^2 + \bb^T_p\bb_p & s_p \vv^T_p + \bb^T_p \BB^T_p \\
s_p \vv_p + \BB_p \bb_p & \vv_p \vv^T_p + \BB_p \BB^T_p
}
&= \II \\
s_p \vv_p + \BB_p \bb_p &= 0 \\
s_p \vv_p + l \BB_p \vv_p &= 0 \\
\BB_p \vv_p &= -\frac{s_p}{l} \vv_p \\
s_p^2 + \bb^T_p\bb_p &= 1 \\
s_p^2 + l^2 \vv^T_p\vv_p &= 1 \\
l &= \pm 1
\end{align}
$$

Now it is very close to the fact that $\BB \pm s\II$ is skew symmetric.  But
the commutability result does not help very much.  Do I need the conjugate
properties? Probably yes. That would be the next step.

<!-- Markdeep: --><style class="fallback">body{visibility:hidden;white-space:pre;font-family:monospace}</style><script src="markdeep.min.js" charset="utf-8"></script><script src="https://morgan3d.github.io/markdeep/latest/markdeep.min.js" charset="utf-8"></script><script>window.alreadyProcessedMarkdeep||(document.body.style.visibility="visible")</script>
